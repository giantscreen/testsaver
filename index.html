<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Loading...</title>
<link id="favicon" rel="icon" type="image/png" href="/favicon.png" />
<style>
html,body{
  margin:0;
  height:100%;
  background:#000;
  overflow:hidden;
  font-family:system-ui,Segoe UI,Google Sans,Arial;
  color:#fff;
}
#hint{
  position:fixed;
  bottom:12px;
  left:12px;
  color:#888;
  font-size:12px;
  z-index:3;
}
#linkIndicator{
  position:fixed;
  bottom:4px;
  right:8px;
  font-size:10px;
  color:#444;
  z-index:3;
}
</style>
</head>
<body>

<div id="hint">stop this madness</div>
<div id="linkIndicator"></div>

<script>
(function(){

const SECRET_CODE = "test";

const REPLACEMENTS = [
  {name: "Clever", url:"https://www.clever.com",title:"Clever",favicon:"https://resources.finalsite.net/images/f_auto,q_auto/v1689877141/mooreschoolscom/emadd6nvplrnh1vsswjf/Clever-Logo.jpg"},
  {name: "Buzz/Echo", url:"https://wwhs.echo-ntn.org",title:"Buzz",favicon:"https://api.agilixbuzz.com/dlap.ashx?cmd=getresource&entityid=//wwhs&path=public/shadow/app/buzz/Echo_White_E_Black_72x72.png"},
  {name: "Blank", url:"about:blank",title:"about:blank",favicon:"/favicon.png"}
];

const HUB_LINKS = [
  { name:"1", url:"effects.html" },
  { name:"2", url:"https://novamath.22web.org/" },
  { name:"3", url:"effects2.html" },
  { name:"4", url:"amazingparticles.html" },
  { name:"5", url:"galaxymovements.html" },
  { name:"6", url:"moreamazingeffects.html" },
  { name:"7", url:"https://slime-rancherweb.netlify.app/" },
  { name:"A cooler place", url:"https://rightonaether.github.io/DesmosAPI-Graphing/" },
];

const G_LIST_LINKS = [
  { name: "Bad Time Simulator", url: "https://script.google.com/macros/s/AKfycbyDlu_jOseVJ1vs-727rRdeIgvVzKkUFT9FwBsdsaLmMKt46TmNtM_jYrDJYvPQb0Y_Lw/exec" },
  { name: "Balatro", url: "https://waguri.jalcorn.net/games/balatro/index.html" },
  { name: "Basket Bros", url: "https://basketbros-unblocked.github.io/a7/basket-bros/" },
  { name: "Baseball Bros", url: "https://waguri.jalcorn.net/games/baseballbros/index.html" },
  { name: "Block Blast", url: "https://arcadehubgaming.github.io/cdn12/BlockBlast-main" },
  { name: "Buckshot Roullete", url: "https://waguri.jalcorn.net/games/buckshot/index.html" },
  { name: "Five Nights at Freddy's (FNAF 1)", url: "https://arcadehubgaming.github.io/cdn7/fnaf/1/index.html" },
  { name: "Five Nights at Freddy's (FNAF 2)", url: "https://arcadehubgaming.github.io/cdn7/fnaf/2/index.html" },
  { name: "Five Nights at Freddy's (Ultimate Custom Night)", url: "https://arcadehubgaming.github.io/cdn7/fnaf/ucn/index.html" },
  { name: "Friday Night Funkin'", url: "https://arcadehubgaming.github.io/cdn2/fridaynightfunkin/index.html" },
  { name: "Hollow Knight [WEB PORT]", url: "https://waguri.jalcorn.net/games/hollowknight/index.html" },
  { name: "Papa's Burgeria", url: "https://arcadehubgaming.github.io/cdn5/cdn5/papasburgeria/index.html" },
  { name: "Papa's Freezeria", url: "https://arcadehubgaming.github.io/cdn5/cdn5/papaspizzaria/index.html" },
  { name: "Papa's Scooperia", url: "https://arcadehubgaming.github.io/cdn3/cdn3/scooperia/index.html" },
  { name: "Papa's Wingeria", url: "https://arcadehubgaming.github.io/cdn14/papaswingeria/" },
  { name: "Parappa the Rapper", url: "https://www.retrogames.cc/embed/41581-parappa-the-rapper.html" },
  { name: "Plants vs. Zombies", url: "https://arcadehubgaming.github.io/cdn11/PlantsVsZombies-main" },
  { name: "Pokémon Emerald", url: "https://script.google.com/macros/s/AKfycbydeGJlDAWwZCE5PY08zOOmx37ItizsHHLSxDEwAEOsGgT7n9rqb4V1Anelns4sezU6/exec" },
  { name: "Pokémon Fire Red", url: "https://script.google.com/macros/s/AKfycbzEbzXxS4zazELSeJtXyLaPrJhPMEJsh2lACeG_0Ky7xTL0ewG0m1iJeU2d1K0OmeGOug/exec" },
  { name: "Slime Rancher", url: "https://slime-rancherweb.netlify.app/" },
  { name: "Soccer Bros", url: "https://waguri.jalcorn.net/games/soccerbros/index.html" },
  { name: "Super Smash Flash 2", url: "https://www.twoplayergames.org/gameframe/super-smash-flash-2?embed=1" }
];


let index = parseInt(localStorage.getItem("linkChoice") || "0", 10);
function applyDisguise(idx) {
  const choice = REPLACEMENTS[idx];
  document.title = choice.title;
  const fav = document.getElementById('favicon');
  if(fav) fav.href = choice.favicon;
  document.getElementById("linkIndicator").textContent = choice.url;
}
applyDisguise(index);

function openHub(){
  const tab = window.open("about:blank","_blank");
  if(!tab) return;

  const hubHTML = `
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>System Hub</title>
<link rel="icon" href="${REPLACEMENTS[index].favicon}">
<link href="https://fonts.googleapis.com/css2?family=Stalinist+One&family=Google+Sans:wght@400;500&display=swap" rel="stylesheet">
<style>
html,body{
  margin:0;
  height:100%;
  background:#000;
  color:#f5c400;
  font-family:'Google Sans',system-ui,Segoe UI,Arial;
  overflow:hidden;
}

#bg{position:fixed;inset:0;z-index:0}
#scanlines{position:fixed;inset:0;background:repeating-linear-gradient(to bottom,rgba(255,255,255,0.04) 0px,rgba(255,255,255,0.04) 1px,transparent 2px,transparent 4px);mix-blend-mode:overlay;pointer-events:none;z-index:2;}

#loading{position:fixed;inset:0;background:radial-gradient(circle at top,#111,#000 70%);display:flex;align-items:center;justify-content:center;flex-direction:column;gap:18px;z-index:10;opacity:1;transition:0.8s;}
#loading.fade-out{opacity:0;visibility:hidden;}
.loader{width:64px;height:64px;border:3px solid #f5c40033;border-top:3px solid #f5c400;border-radius:50%;animation:spin 1s linear infinite;}
@keyframes spin{to{transform:rotate(360deg)}}

#hub{display:flex;height:100%;flex-direction:row;padding:24px;gap:24px;position:relative;z-index:3;opacity:0;transition:1s;pointer-events:none;overflow-y:auto;}
#hub.fade-in{opacity:1;pointer-events:auto;}

h1{letter-spacing:4px;text-shadow:0 0 14px #f5c40088;margin:0 0 24px 0;font-family:'Stalinist One',cursive;}
#grid{display:grid;grid-template-columns:repeat(4,1fr);gap:18px;flex:1;}
.icon-btn{background:linear-gradient(145deg,#0a0a0a,#030303);border:1px solid #f5c40066;padding:24px 16px;text-align:center;cursor:pointer;transition:.15s;display:flex;align-items:center;justify-content:center;min-height:80px;font-size:24px;}
.icon-btn:hover{transform:scale(1.05);box-shadow:0 0 20px #f5c40088;border-color:#f5c400;}

#sidebar-container { display: flex; flex-direction: column; gap: 20px; width: 300px; }
.panel{background:rgba(0,0,0,0.5);border:1px solid #f5c40066;padding:18px;border-radius:4px;}
.panel h2{margin:0 0 12px 0; font-size: 18px; letter-spacing:1px;}

.disguise-item { padding: 8px; margin-bottom: 5px; border: 1px solid #444; cursor: pointer; font-size: 14px; transition: 0.2s; }
.disguise-item:hover { background: #f5c40022; }
.disguise-item.active { border-color: #f5c400; background: #f5c40033; }

#g-popup-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.9); display: flex; z-index: 10000; align-items: center; justify-content: center; opacity: 0; visibility: hidden; transition: 0.4s; }
#g-popup-overlay.active { opacity: 1; visibility: visible; }
#g-popup-content { background: #000; border: 2px solid #f5c400; padding: 30px; width: 85%; max-width: 800px; max-height: 85vh; overflow-y: auto; position: relative; }
#close-g-list { position: absolute; top: 10px; right: 15px; color: #f5c400; cursor: pointer; font-size: 28px; }

#panic{position:fixed;bottom:18px;right:18px;background:#300;border:1px solid #f00;color:#f88;padding:10px 16px;cursor:pointer;z-index:4;}
iframe{position:fixed;inset:0;width:100%;height:100%;border:0;display:none;z-index:9999;}
#app-loading{position:fixed;inset:0;background:#000;display:none;align-items:center;justify-content:center;z-index:9998;}
#app-loading.show{display:flex;}
</style>
</head>
<body>
<canvas id="bg"></canvas>
<div id="scanlines"></div>

<div id="loading"><div class="loader"></div><div>hi</div></div>

<div id="hub">
  <div style="flex:1;">
    <h1>SYSTEM_HUB</h1>
    <div id="grid">
      ${HUB_LINKS.map(l=>\`<div class="icon-btn" data-url="\${l.url}"><span>\${l.name}</span></div>\`).join("")}
      <div class="icon-btn" id="g-list-trigger" style="color:#fff; background:linear-gradient(145deg, #1a1a00, #000);"><span>G-LIST</span></div>
    </div>
  </div>
  
  <div id="sidebar-container">
    <div class="panel">
      <h2>DISGUISE SETTINGS</h2>
      <div id="disguise-list">
        \${REPLACEMENTS.map((r, i) => \`
          <div class="disguise-item \${i === index ? 'active' : ''}" data-idx="\${i}">
            \${r.name}
          </div>
        \`).join("")}
      </div>
    </div>
    
    <div class="panel">
      <h2>PATCH NOTES</h2>
      <div style="font-size:13px; line-height:1.6;">
        v1.2.5 - Stable<br><br>
        - Fixed Disguise Selection<br>
        - Added persistence<br>
        - Improved G-List response
      </div>
    </div>
  </div>
</div>

<div id="g-popup-overlay">
  <div id="g-popup-content">
    <div id="close-g-list">&times;</div>
    <h1 style="text-align:center; font-size:24px;">G-LIST GALAXY</h1>
    <div id="g-grid" style="display:grid; grid-template-columns:repeat(auto-fill, minmax(180px, 1fr)); gap:15px; margin-top:20px;">
      ${G_LIST_LINKS.map(l=>\`<div class="icon-btn g-link-item" data-url="\${l.url}" style="font-size:18px; min-height:60px;"><span>\${l.name}</span></div>\`).join("")}
    </div>
  </div>
</div>

<button id="panic">PANIC</button>
<div id="app-loading"><div class="loader"></div></div>
<iframe id="frame"></iframe>

<script>
const REPLACEMENTS = ${JSON.stringify(REPLACEMENTS)};
const c=document.getElementById('bg'),ctx=c.getContext('2d');
function resize(){c.width=innerWidth;c.height=innerHeight}
resize();addEventListener('resize',resize);

const lines=Array.from({length:60},()=>({x:Math.random()*innerWidth,y:Math.random()*innerHeight,l:Math.random()*100+50,s:Math.random()*0.5+0.2}));
function draw(){
  ctx.fillStyle='rgba(0,0,0,0.2)';
  ctx.fillRect(0,0,c.width,c.height);
  ctx.strokeStyle='rgba(245,196,0,0.15)';
  lines.forEach(l=>{
    ctx.beginPath();ctx.moveTo(l.x,l.y);ctx.lineTo(l.x+l.l,l.y);ctx.stroke();
    l.x+=l.s; if(l.x>c.width)l.x=-l.l;
  });
  requestAnimationFrame(draw);
}
draw();

setTimeout(()=>{
  document.getElementById('loading').classList.add('fade-out');
  document.getElementById('hub').classList.add('fade-in');
}, 1000);

document.getElementById('disguise-list').onclick = e => {
  const item = e.target.closest('.disguise-item');
  if(!item) return;
  const idx = item.dataset.idx;
  
  window.opener.postMessage({type: 'SET_DISGUISE', index: idx}, "*");
  
  document.querySelectorAll('.disguise-item').forEach(el => el.classList.remove('active'));
  item.classList.add('active');
};

function loadUrl(url) {
  document.getElementById('hub').style.display = 'none';
  document.getElementById('app-loading').classList.add('show');
  setTimeout(()=>{
    const f=document.getElementById('frame');
    f.src="https://giantscreen.github.io/screensaver/#target="+encodeURIComponent(url);
    f.style.display='block';
    document.getElementById('app-loading').classList.remove('show');
  },1500);
}

document.getElementById('grid').onclick=e=>{
  const btn=e.target.closest('.icon-btn');
  if(!btn) return;
  if(btn.id === 'g-list-trigger') return document.getElementById('g-popup-overlay').classList.add('active');
  loadUrl(btn.dataset.url);
};

document.getElementById('g-grid').onclick=e=>{
  const btn=e.target.closest('.g-link-item');
  if(btn) loadUrl(btn.dataset.url);
};

document.getElementById('close-g-list').onclick=()=>document.getElementById('g-popup-overlay').classList.remove('active');
document.getElementById('panic').onclick=()=>window.close();
<\/script>
</body>
</html>
`;

  tab.document.open();
  tab.document.write(hubHTML);
  tab.document.close();

  
  document.documentElement.style.visibility='hidden';
  setTimeout(()=>location.replace(REPLACEMENTS[index].url), 500);
}


window.addEventListener("message", (event) => {
  if (event.data.type === 'SET_DISGUISE') {
    const newIdx = parseInt(event.data.index);
    localStorage.setItem("linkChoice", newIdx);
    index = newIdx;
    applyDisguise(newIdx);
  }
});

let buffer="";
window.addEventListener("keydown",e=>{
  buffer+=e.key.toLowerCase();
  if(buffer.endsWith(SECRET_CODE)){
    buffer="";
    openHub();
  }
  if(buffer.length>20) buffer=buffer.slice(-20);
});

})();
</script>

</body>
</html>
